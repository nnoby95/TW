javascript:function loadXMLDoc(e){if(window.XMLHttpRequest)xhttp=new XMLHttpRequest;else xhttp=new ActiveXObject("Microsoft.XMLHTTP");xhttp.open("GET",e,false);xhttp.send();return xhttp.responseXML}function vercheck(){try{if(typeof CVERZIO=="undefined"){naplo("Globál","Verzióellenőrzés sikertelen: nem érhető el a cnc weboldal");return}if(CVERZIO!=VERZIO)naplo("Globál","<b>Új verzió jelent meg!</b> Frissítés ajánlott. Jelenlegi: "+VERZIO+". Új: "+CVERZIO)}catch(e){alert2(e)}}function init(){try{if(document.getElementById("production_table"))var e=document.getElementById("production_table");else if(document.getElementById("combined_table"))var e=document.getElementById("combined_table");else if(document.getElementById("buildings_table"))var e=document.getElementById("buildings_table");else if(document.getElementById("techs_table"))var e=document.getElementById("techs_table");else{alert("Ilyen nézetbe való futtatás nem támogatott. Kísérlet az áttekintés betöltésére...\n\nLaunching from this view is not supported. Trying to load overview...");document.location.href=document.location.href.replace(/screen=[a-zA-Z]+/g,"screen=overview_villages");return false}var t=new RegExp(/[0-9]+(\|)[0-9]+/);if(t.test(e.rows[1].cells[0].textContent))var n=0;else if(t.test(e.rows[1].cells[1].textContent))var n=1;else if(t.test(e.rows[1].cells[2].textContent))var n=2;else{alert("Nem találok koordinátákat ebbe a listába.\n\nI can not find coordinates in this view.");return false}VILL1ST=e.rows[1].cells[n].getElementsByTagName("a")[0].href;for(var r=1;r<e.rows.length;r++){var i=e.rows[r].cells[n].textContent.match(/[0-9]+(\|)[0-9]+/g);i=i[i.length-1];KTID[r-1]=i+";"+e.rows[r].cells[n].getElementsByTagName("span")[0].getAttribute("data-id").match(/[0-9]+/g)[0]}document.getElementsByTagName("head")[0].innerHTML+='<style type="text/css">body{ background: #111; } table.fej{ padding:1px;  margin:auto; color: white; border: 1px solid yellow; } table.menuitem{ vertical-align:top; text-align: top; padding: 20px; margin:auto; color: white; border: 1px solid yellow; } table.menuitem td{ padding: 0px; vertical-align:top; }  table{ padding: 0px; margin: auto; color: white;  } table.vis{ color:black; } table.vis td, table.vis th{ padding: 3px 6px 3px 6px;  } #farm_honnan tr td:last-child{font-size:50%;  width:130px;} #farm_hova tr td:last-child{font-size:50%; width:130px;}  textarea{ background-color: #020; color:white; } .divrow{ display: table-row; } .divcell { display: table-cell; text-align: center; vertical-align:top; }  a{ color: white; } img{ border-color: grey; padding:1px; } #naploka a {color:blue;} input[type="button"] {font-size:13px; font-family:Century Gothic,sans-serif;    color:#FFFF77;    background-color:#3366CC;    border-style:ridge;    border-color:#000000;    border-width:3px; }  </style>';document.getElementsByTagName("body")[0].innerHTML='<div id="alert2" style="width: 300px; background-color: #60302b; color: #FFA; position: fixed; left:40%; top:40%; border:3px solid black; font-size: 11pt; padding: 5px; z-index:200; display:none"><div id="alert2head" style="width:100%;cursor:all-scroll; text-align:right; background: rgba(255,255,255,0.1)"><a href=\'javascript: alert2("close");\'>X (Bezár)</a></div><p id="alert2szov"></p></div> <table width="1024px" align="center" class="fej" style="background: #111; background-image:url(\''+pic("wallp.jpg")+'\'); background-size:1024px;"> <tr><td width="70%" id="fejresz" style="vertical-align:middle; margin:auto;"><h1><i></i></h1></td><td id="sugo" height="110px"></td></tr> <tr><td colspan="2" id="menuk" style="">  	<div class="divrow" style="width: 1024px"> 		<span class="divcell" id="kiegs" style="text-align:left; padding-top: 5px;width:774px;"><img src="'+pic("muhely_logo.png")+'" alt="Muhely" title="C&C Műhely megnyitása" onclick="window.open(\'http://muhely2.cncdani2.freeiz.com/index.php\')"> <img src="'+pic("kh_logo.png")+'" alt="Game" title="Klánháború megnyitása" onclick="window.open(\''+VILL1ST+'\')"> | </span> 		<span class="divcell" style="text-align:right; width:250px"> 			<a href=\'javascript: nyit("naplo");\' onmouseover="sugo(\'Események naplója\')">Napló</a> 			<a href=\'javascript: nyit("debug");\' onmouseover="sugo(\'Hibanapló\')">Debug</a> 			<a href=\'javascript: nyit("hang");\'><img src="'+pic("hang.png")+'" onmouseover="sugo(\'Hangbeállítások\')" alt="hangok"></a> 		</span> 	</div> 	 </td></tr> </table> <p id="content" style="display: inline"></p>';document.getElementById("content").innerHTML='<table class="menuitem" width="1024px" align="center" id="naplo" style="display: none"> <tr><td> <h1 align="center">Napló</h1><br> <br> <table align="center" class="vis" id="naploka"><tr><th onclick=\'rendez("datum2",false,this,"naploka",0)\'  style="cursor: pointer;">Dátum</th><th  onclick=\'rendez("szoveg",false,this,"naploka",1)\' style="cursor: pointer;">Script</th><th  onclick=\'rendez("szoveg",false,this,"naploka",2)\' style="cursor: pointer;">Esemény</th></tr></table> </td></tr> </table>  <table class="menuitem" width="1024px" align="center" id="debug" style="display: none"> <tr><td> <h1 align="center">DeBugger</h1><br> <br> <table align="center" class="vis" id="debugger"><tr><th onclick=\'rendez("datum2",false,this,"debugger",0)\' style="cursor: pointer;">Dátum</th><th onclick=\'rendez("szoveg",false,this,"debugger",1)\' style="cursor: pointer;">Script</th><th onclick=\'rendez("szoveg",false,this,"debugger",2)\' style="cursor: pointer;">Esemény</th></tr></table> </td></tr> </table>  <table class="menuitem" width="1024px" align="center" id="hang" style="display: none"> <tr><td> <p align="center"><audio id="audio1" controls="controls" autoplay="autoplay"><source id="wavhang" src="" type="audio/wav"></audio></p> <h1 align="center">Hangbeállítás</h1><br> <div id="hangok" style="display:table;"> 	<div style="display:table-row;"><div style="display:table-cell; padding:10px;" onmouseover=\'sugo("Ha be van kapcsolva, bot védelem esetén ez a link is megnyitódik, mint figyelmeztetés.")\'><b>Alternatív botriadó? <a href="javascript: altbot()">BEKAPCSOLVA</a><br>Megnyitott URL (egyszer)<br><input type="text" id="altbotURL" size="42" value="http://www.youtube.com/watch?v=k2a30--j37Q"></div>   </div> </div> </td></tr> </table>';document.title="SZEM IV";debug("SZEM 4","Verzió: "+VERZIO);debug("SZEM 4","Prog.azon: "+AZON);debug("SZEM 4","W-Speed: "+SPEED);debug("SZEM 4","U-Speed: "+UNIT_S);return true}catch(s){alert("Hiba indításkor:\n\nError at starting:\n"+s);return false}}function pic(e){return"http://cncdani2.freeiz.com/SZEM4/"+e}function altbot(){try{ALTBOT=!ALTBOT;if(ALTBOT){document.getElementById("altbotURL").parentNode.getElementsByTagName("a")[0].innerHTML="BEKAPCSOLVA";document.getElementById("altbotURL").removeAttribute("disabled")}else{document.getElementById("altbotURL").parentNode.getElementsByTagName("a")[0].innerHTML="KIKAPCSOLVA";document.getElementById("altbotURL").setAttribute("disabled","true")}return}catch(e){alert(e)}}function soundVolume(e){document.getElementById("audio1").volume=e}function playSound(e){try{var t=document.getElementsByName(e)[0];if(t==undefined){debug("hanghiba","Nem definiált hang: "+e);return}if(t.checked==false)return;var n="http://cncdani2.freeiz.com/SZEM4/"+e+".wav";document.getElementById("wavhang").src=n;document.getElementById("audio1").load();setTimeout('if (document.getElementById("audio1").paused) document.getElementById("audio1").play()',666)}catch(r){alert2(r)}}function validate(e){var t=e||window.event;var n=t.keyCode||t.which;n=String.fromCharCode(n);var r=/[0-9]|\./;if(!r.test(n)){t.returnValue=false;if(t.preventDefault)t.preventDefault()}}function shorttest(){try{var e="";var t="";var n=document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input");if(n[0].value=="")e+="Termelés/óra értéke üres. Legalább egy 0 szerepeljen!\n";if(parseInt(n[0].value,10)<50)t+="Termelés/óra értéke nagyon alacsony. \n";if(n[1].value=="")e+="Max táv/óra: Üres érték. \n";if(n[2].value=="")e+="Max táv/perc: Üres érték. \n";if(parseInt(n[1].value,10)==0&&parseInt(n[2].value,10)<1)e+="A jelenleg megadott max távolság 0!\n";if(parseInt(n[1].value,10)==0&&parseInt(n[2].value,10)<40)t+="A jelenleg megadott max távolság nagyon rövid!\n";if(n[3].value=="")e+="A határszám értéke üres. Minimum megengedett értéke: 100.\n";if(parseInt(n[3].value,10)<100)e+="A határszám értéke túl alacsony. Minimum megengedett értéke: 100.\n";if(n[4].value=="")e+="Ha nem szeretnél kémet küldeni, írj be 0-t.\n";if(parseInt(n[4].value,10)>3)t+="3-nál több kém egyik szerveren sem szükséges. Javasolt: 1 vagy 3.\n";if(n[5].checked&&parseInt(n[4].value,10)==0)t+="Kényszeríted a kémek küldését, de a küldendő kém értékére 0 van megadva!\n";if(n[6].checked&&parseInt(n[4].value,10)==0)t+="Kezdő kémtámadást szeretnél, de a küldendő kém értékére 0 van megadva!\n";if(n[7].value=="")e+="Ha minimum limit nélkül szeretnéd egységeid küldeni, írj be 0-t.\n";var r=parseInt(n[3].value,10);var i=parseInt(n[7].value,10);if(Math.ceil(r/20)<i)e+="A minimum sereg/falu legalább 20x-osa kell hogy legyen a határszám. Javaslatok: Minimum sereg "+Math.ceil(r/20)+", vagy Határszám: "+Math.ceil(i*20)+"\n";if(n[8].value=="")e+="A legkevesebb pihenő idő: 1 perc, ne hagyd üresen.\n";if(parseInt(n[8].value,10)<1)e+="A legkevesebb pihenő idő: 1 perc.\n";if(parseInt(n[8].value,10)>150)e+="150 percnél több pihenő időt nem lehet megadni.\n";if(n[9].value=="")e+="A leggyorsabb ciklusidő: 200 ms, ne hagyd üresen.\n";if(parseInt(n[9].value,10)<200)e+="A leggyorsabb ciklusidő: 200 ms\n";if(parseInt(n[9].value,10)>3e3)e+="3000 ms-nél több ciklusidő felesleges, és feltűnő. Írj be 3000 alatti értéket.\n";if(parseInt(n[10].value,10)<20)e+="Raktár telítettségi értéke túl alacsony, így vélhetőleg sehonnan se fog fosztani.";if(e!=""&&!FARM_PAUSE)szunet("farm",document.getElementsByName("farm")[0]);if(FARM_PAUSE)t+="A farmoló jelenleg meg van állítva!";if(e!=""){alert2("<b>Egy vagy több beállítási hiba miatt nem indítható a farmoló! Javítsa, majd indítsa el a kiegészítőt.</b><br><br>"+e);return false}else{if(t=="")alert2("close");else alert2("Javaslatok:\n"+t);return true}return}catch(s){alert2("Hiba :(\n"+s)}}function sugo(e){var t=e.length;t=Math.round(t*1e3/23);if(SUGOORA!="undefined")clearTimeout(SUGOORA);document.getElementById("sugo").innerHTML=e;if(e!="")SUGOORA=setTimeout('sugo("")',t);return}function nyit(e){try{var t=document.getElementById("content").childNodes;var n="";for(var r=0;r<t.length;r++){if(t[r].nodeName.toUpperCase()=="TABLE"){n=t[r].getAttribute("id");$("#"+n).fadeOut(300)}}var i=new RegExp('"'+e+'"');t=document.getElementById("menuk").getElementsByTagName("a");for(r=0;r<t.length;r++){t[r].style.padding="3px";if(i.test(t[r].getAttribute("href")))t[r].style.backgroundColor="#000000";else t[r].style.backgroundColor="transparent"}setTimeout(function(){$("#"+e).fadeIn(300)},300)}catch(s){alert(s)}}function alert2(e){e=e+"";if(e=="close"){$("#alert2").hide();return}e=e.replace("\n","<br>");document.getElementById("alert2szov").innerHTML="<b>Üzenet:</b><br>"+e;$("#alert2").show()}function naplo(e,t){var n=new Date;var r=n.getMinutes();var i=n.getSeconds();if(r<10)r="0"+r;if(i<10)i="0"+i;var s=new Array("Jan","Febr","March","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec");var o=document.getElementById("naploka");var u=o.insertRow(1);var a=u.insertCell(0);var f=u.insertCell(1);var l=u.insertCell(2);a.innerHTML=s[n.getMonth()]+" "+n.getDate()+", "+n.getHours()+":"+r+":"+i;f.innerHTML=e;l.innerHTML=t;playSound("naplobejegyzes");return}function debug(e,t){var n=new Date;var r=n.getMinutes();var i=n.getSeconds();if(r<10)r="0"+r;if(i<10)i="0"+i;var s=new Array("Jan","Febr","March","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec");var o=document.getElementById("debugger");var u=o.insertRow(1);var a=u.insertCell(0);var f=u.insertCell(1);var l=u.insertCell(2);a.innerHTML=s[n.getMonth()]+" "+n.getDate()+", "+n.getHours()+":"+r+":"+i;f.innerHTML=e;l.innerHTML=t}function ujkieg(e,t,n){if(document.getElementById(t))return false;document.getElementById("kiegs").innerHTML+="<img onclick='szunet(\""+e+'",this)\' name="'+e+'" onmouseover=\'sugo("Az érintett scriptet tudod megállítani/elindítani.")\' src="'+pic("play.png")+'" alt="Stop" title="Klikk a szüneteltetéshez"> <a href=\'javascript: nyit("'+e+"\");'>"+t.toUpperCase()+"</a> ";document.getElementById("content").innerHTML+='<table class="menuitem" width="1024px" align="center" id="'+e+'" style="display: none">'+n+"</table>";return true}function ujkieg_hang(e,t){try{var n=t.split(";")}catch(r){var n=t}var i=document.getElementById("hangok").getElementsByTagName("div")[0];var s=document.createElement("div");s.setAttribute("style","display:table-cell; padding:10px;");var o="<h3>"+e+"</h3>";for(var u=0;u<n.length;u++){o+='<input type="checkbox" name="'+n[u]+'" checked> <a href="javascript: playSound(\''+n[u]+"');\">"+n[u]+"</a><br>"}s.innerHTML=o;i.appendChild(s);return}function szunet(e,t){try{switch(e){case"farm":FARM_PAUSE=!FARM_PAUSE;var n=FARM_PAUSE;break;case"vije":VIJE_PAUSE=!VIJE_PAUSE;var n=VIJE_PAUSE;break;case"idtamad":alert2("Ezt a script nem állítható meg, mivel nem igényel semmilyen erőforrást.<br>Ha a hangot szeretnéd kikapcsolni, megteheted azt a hangbeállításoknál.");break;case"epit":EPIT_PAUSE=!EPIT_PAUSE;var n=EPIT_PAUSE;break;case"adatok":ADAT_PAUSE=!ADAT_PAUSE;var n=ADAT_PAUSE;break;default:{alert2("Sikertelen script megállatás. Nincs ilyen alscript: "+e);return}}if(n){t.src=pic("pause.png");t.alt="Start";t.title="Klikk a folytatáshoz"}else{t.src=pic("play.png");t.alt="Stop";t.title="Klikk a szüneteltetéshez"}if(e=="farm")shorttest()}catch(r){alert2("Hiba:\n"+r)}}function rendez(e,t,n,r,i){try{var s=document.getElementById(r).getElementsByTagName("tbody")[0];var o=document.getElementById(r).rows;if(o.length<2)return;var u=new Array;var a=new Array;var f=new Array;var l=0;var c=$.trim(o[1].cells[i].innerText).replace(" ","");for(var h=1;h<o.length;h++){switch(e){case"szoveg":u[h-1]=o[h].cells[i].innerText;break;case"szam":u[h-1]=parseInt(o[h].cells[i].innerText.replace(".",""));break;case"datum":if(o[h].cells[i].innerText=="")u[h-1]=new Date;else u[h-1]=new Date(o[h].cells[i].innerText);break;case"datum2":var p=new Array("Jan","Febr","March","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec");var d=new Date;var v=o[h].cells[i].innerText;d.setMonth(p.indexOf(v.split(" ")[0]));d.setDate(v.split(" ")[1].replace(",",""));d.setHours(v.split(" ")[2].split(":")[0]);d.setMinutes(v.split(" ")[2].split(":")[1]);d.setSeconds(v.split(" ")[2].split(":")[2]);u[h-1]=d;break;case"lista":u[h-1]=o[h].cells[i].getElementsByTagName("select")[0].value;break;default:throw"Nem értelmezhető mi szerint kéne rendezni.";return}a[h-1]=o[h];f[h-1]=h-1}for(var h=0;h<u.length;h++){var m=h;for(var g=h;g<u.length;g++){if(t){if(u[g]>u[m])m=g}else{if(u[g]<u[m])m=g}}var y=u[h];u[h]=u[m];u[m]=y;var y=f[h];f[h]=f[m];f[m]=y}for(var h=o.length-1;h>0;h--){s.deleteRow(h)}for(var h=0;h<u.length;h++){s.appendChild(a[f[h]])}n.setAttribute("onclick",'rendez("'+e+'",'+!t+',this,"'+r+'",'+i+")");return}catch(b){alert2("Hiba rendezéskor:\n"+b)}}function koordTOid(e){for(var t=0;t<KTID.length;t++){if(KTID[t].split(";")[0]==e)return KTID[t].split(";")[1]}return 0}function rovidit(e){var t="";switch(e){case"egysegek":for(var n=0;n<UNITS.length;n++)t+='<img style="width:15px" src="/graphic/unit/unit_'+UNITS[n]+'.png"><input type="checkbox" onclick="szem4_farmolo_multiclick('+n+",'honnan',this.checked)\">";break;default:t=""}return t}function getServerTime(e){var t=new Date;return t}function maplink(e){return'<a href="'+VILL1ST.replace("screen=overview","x="+e.split("|")[0]+"&y="+e.split("|")[1]+"&screen=map")+'" target="_BLANK">'+e+"</a>"}function multipricer(e,t,n){try{if(e==undefined)return;if(!document.getElementById("farm_multi_"+e).checked)return;var r=document.getElementById("farm_"+e).rows;for(var i=r.length-1;i>0;i--){if(r[i].style.display!="none"){switch(t){case"del":r[i].parentNode.removeChild(r[i]);break;case"urit":if(e=="honnan")r[i].cells[2].innerHTML="";else r[i].cells[5].innerHTML="";break;case"mod":r[i].cells[3].innerHTML=n;break;case"htor":r[i].cells[0].style.backgroundColor="#f4e4bc";break;case"hcser":r[i].cells[2].style.backgroundColor=n;break}}}}catch(s){}}function sortorol(e,t){var n=e.parentNode;n.parentNode.removeChild(n);multipricer(t,"del")}function urit(e,t){e.innerHTML="";multipricer(t,"urit")}function modosit_szam(e){var t=prompt("Új érték?");if(t==null)return;t=t.replace(/[^0-9]/g,"");if(t=="")return;e.innerHTML=t;multipricer("hova","mod",t)}function hattertolor(e){e.style.backgroundColor="#f4e4bc";multipricer("hova","htor")}function hattercsere(e){var t="#00FF00";if(e.style.backgroundColor=="rgb(0, 255, 0)"||e.style.backgroundColor=="#00FF00")t="#f4e4bc";e.style.backgroundColor=t;multipricer("hova","hcser",t)}function BotvedelemBe(){try{BOT_VOL+=.2;if(BOT_VOL>1)BOT_VOL=1;soundVolume(BOT_VOL);playSound("bot2");BOT=true;alert2('BOT VÉDELEM!!!<br>Írd be a kódot, és kattints ide lentre!<br><br><a href="javascript: BotvedelemKi()">Beírtam a kódot, mehet tovább!</a>')}catch(e){debug("BotvedelemBe()",e)}if(!ALTBOT2){window.open(document.getElementById("altbotURL").value);ALTBOT2=true}BOTORA=setTimeout("BotvedelemBe()",1500);return}function BotvedelemKi(){BOT=false;ALTBOT2=false;BOT_VOL=0;document.getElementById("audio1").pause;alert2("OK");clearTimeout(BOTORA);try{FARM_REF.location.reload()}catch(e){}try{VIJE_REF1.location.reload()}catch(e){}try{VIJE_REF2.location.reload()}catch(e){}try{IDTAMAD_REF.location.reload()}catch(e){}try{EPIT_REF.location.reload()}catch(e){}return}function add_farmolo(){try{var e=document.getElementById("farm_opts");var t=e.rows[1].cells[0].getElementsByTagName("input")[0].value;if(t=="")return;var n=new RegExp(/[0-9]+(\|)[0-9]+/);if(!n.test(t))throw"Nincs érvényes koordináta megadva";t=t.match(/[0-9]+(\|)[0-9]+/g);var r=false;for(var i=0;i<e.rows[2].cells[0].getElementsByTagName("input").length;i++){if(e.rows[2].cells[0].getElementsByTagName("input")[i].checked==true){r=true;break}}if(!r){if(!confirm("Nincs semmilyen egység megadva, amit küldhetnék. Folytatod?\n(később ez a megadás módosítható)"))return}var s="";for(var o=0;o<t.length;o++){var u=document.getElementById("farm_honnan");var a=document.getElementById("farm_hova");for(var i=1;i<u.rows.length;i++){if(u.rows[i].cells[0].textContent==t[o]){s+=t[o]+", ";t[o]="";break}}if(t[o]=="")continue;for(var i=1;i<a.rows.length;i++){if(a.rows[i].cells[0].textContent==t[o]){s+=t[o]+", ";t[o]="";break}}if(t[o]=="")continue;if(koordTOid(t[o])==0){s+=t[o]+", ";t[o]="";continue}var a=u.insertRow(-1);var f=a.insertCell(0);f.innerHTML=t[o];f.setAttribute("ondblclick",'sortorol(this,"honnan")');var f=a.insertCell(1);f.innerHTML=rovidit("egysegek");for(var i=0;i<f.getElementsByTagName("input").length;i++){if(e.rows[2].cells[0].getElementsByTagName("input")[i].checked==true)f.getElementsByTagName("input")[i].checked=true}var f=a.insertCell(2);f.innerHTML="";f.setAttribute("ondblclick",'urit(this,"honnan")')}e.rows[1].cells[0].getElementsByTagName("input")[0].value="";if(s!="")alert2("Dupla falumegadások, esetleg nem lévő saját faluk kiszűrve:\n"+s);return}catch(l){alert(l)}}function add_farmolando(){try{var e=document.getElementById("farm_opts");var t=e.rows[1].cells[1].getElementsByTagName("input")[0].value;if(t=="")return;var n=new RegExp(/[0-9]+(\|)[0-9]+/);if(!n.test(t))throw"Nincs érvényes koordináta megadva";t=t.match(/[0-9]+(\|)[0-9]+/g);e.rows[2].cells[1].getElementsByTagName("input")[3].value=e.rows[2].cells[1].getElementsByTagName("input")[3].value.replace(/[^0-9]/g,"");if(e.rows[2].cells[1].getElementsByTagName("input")[3].value=="")e.rows[2].cells[1].getElementsByTagName("input")[3].value=3600;var r="";for(var i=0;i<t.length;i++){var s=document.getElementById("farm_hova");var o=document.getElementById("farm_honnan");for(var u=1;u<s.rows.length;u++){if(s.rows[u].cells[0].textContent==t[i]){r+=t[i]+", ";t[i]="";break}}if(t[i]=="")continue;for(var u=1;u<o.rows.length;u++){if(o.rows[u].cells[0].textContent==t[i]){r+=t[i]+", ";t[i]="";break}}if(t[i]=="")continue;var o=s.insertRow(-1);var a=o.insertCell(0);a.innerHTML=t[i];a.setAttribute("ondblclick","hattertolor(this)");a.setAttribute("data-age","0");var a=o.insertCell(1);a.innerHTML="";a.setAttribute("ondblclick",'sortorol(this,"hova")');var a=o.insertCell(2);a.innerHTML="0";a.setAttribute("ondblclick","hattercsere(this)");var a=o.insertCell(3);a.innerHTML=e.rows[2].cells[1].getElementsByTagName("input")[3].value;a.setAttribute("ondblclick","modosit_szam(this)");var a=o.insertCell(4);a.innerHTML='<input type="checkbox" onclick="szem4_farmolo_multiclick(0,\'hova\',this.checked)">';var a=o.insertCell(5);a.innerHTML="";a.setAttribute("ondblclick",'urit(this,"hova")')}e.rows[1].cells[1].getElementsByTagName("input")[0].value="";if(r!="")alert2("Dupla falumegadások kiszűrve:\n"+r);return}catch(f){alert(f)}}function szem4_farmolo_updater(){try{alapszam=document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[0].value;if(alapszam!="")alapszam=parseInt(alapszam);else alapszam=1e3;var e=document.getElementById("farm_hova").rows;var t=0;for(var n=1;n<e.length;n++){try{if(e[n].cells[0].style.backgroundColor=="red")continue;if(e[n].cells[1].textContent=="")t=alapszam;else{var r=e[n].cells[1].textContent.split(",");t=(TERMELES[r[0]]+TERMELES[r[1]]+TERMELES[r[2]])*SPEED}t=Math.round(t/60);var i=parseInt(e[n].cells[3].innerHTML)+t;if(isNaN(i)){debug("Farmoló","Autófrissítő anomália: "+e[n].cells[0].innerHTML+"falunál: "+e[n].cells[3].innerHTML+"+"+t+"=Nem szám!");continue}if(i>1e6)i=1e6;var s=parseInt(e[n].cells[0].getAttribute("data-age"),10);s++;e[n].cells[0].setAttribute("data-age",s);if(s>120){var o=document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[3].value;if(i>hatarszam*2){i=hatarszam*2}}e[n].cells[3].innerHTML=i}catch(u){debug("Farmoló","Hiba az autofrissítőnél: "+u)}}setTimeout("szem4_farmolo_updater()",6e4);return}catch(u){debug("Farmoló","Hiba az autofrissítőnél: "+u);setTimeout("szem4_farmolo_updater()",6e4)}}function isPageLoaded(e,t,n){try{if(e.closed)return false;if(e.document.getElementById("bot_check")||e.document.title=="Bot védelem"){naplo("Globális","Bot védelem aktív!!!");document.getElementById("audio1").volume=.2;BotvedelemBe();return false}if(e.document.location.href.indexOf("sid_wrong")>-1){naplo("Globális","Kijelentkezett fiók. Jelentkezzen be újra, vagy állítsa le a programot.");BotvedelemBe();return false}if(n.indexOf("not ")>-1)var r=true;else var r=false;if(t>-1)if(e.game_data.village.id!=t)return false;if(e.document.getElementById("serverTime").innerHTML.length>4){if(r){if(e.document.location.href.indexOf(n.split(" ")[1])==-1)return true}else{if(e.document.location.href.indexOf(n)>-1)return true}}}catch(i){return false}return false}function szem4_farmolo_multiclick(e,t,n){try{if(!document.getElementById("farm_multi_"+t).checked)return;var r=document.getElementById("farm_"+t).rows;if(t=="honnan")t=1;else t=4;for(var i=1;i<r.length;i++){if(r[i].style.display!="none")r[i].cells[t].getElementsByTagName("input")[e].checked=n}return}catch(s){alert2("Hiba: "+t+"-"+e+"\n"+s)}}function szem4_farmolo_csoport(e){try{var t=prompt("Faluszűrő\nAdd meg azon faluk koordinátáit, melyeket a listában szeretnél látni. A többi falu csupán láthatatlan lesz, de tovább folyik a használata.\nSpeciális lehetőségid:\n-1: Csupán ezt az értéket adva meg megfordítódik a jelenlegi lista láthatósága (negáció)\n-...: Ha az első karakter egy - jel, akkor a felsorolt faluk kivonódnak a jelenlegi listából (különbség)\n+...: Ha az első karaktered +, akkor a felsorolt faluk hozzáadódnak a listához (unió)\nÜresen leokézva az összes falu láthatóvá válik");if(t==null)return;var n="norm";if(t=="-1")n="negalt";else{if(t[0]=="-")n="kulonbseg";if(t[0]=="+")n="unio"}if(t=="")n="all";t=t.match(/[0-9]+(\|)[0-9]+/g);var r=false;var i;var s=document.getElementById("farm_"+e).rows;for(var o=1;o<s.length;o++){r=false;i=s[o].cells[0].textContent;switch(n){case"norm":if(t.indexOf(i)>-1)r=true;break;case"negalt":if(s[o].style.display=="none")r=true;break;case"kulonbseg":if(s[o].style.display!="none"&&t.indexOf(i)==-1)r=true;break;case"unio":if(s[o].style.display!="none"||t.indexOf(i)>-1)r=true;break;case"all":r=true;break}if(r)s[o].setAttribute("style","display:line");else s[o].setAttribute("style","display:none")}}catch(u){alert2("Hiba: \n"+u)}}function isgyalog(e){try{var t=0;var n=document.getElementById("farm_honnan").rows[e].cells[1].getElementsByTagName("input");if(n[5].checked||n[6].checked||n[7].checked)t=1;if(n[0].checked||n[1].checked||n[2].checked||n[3].checked){if(t==1)t=2;else t=3}return t}catch(r){debug("isgyalog()",r)}}function szem4_farmolo_1kereso(){try{var e="";var t=document.getElementById("farm_hova").rows;var n=document.getElementById("farm_honnan").rows;var r=new Array;var i=new Date;var s;if(t.length==1||n.length==1)return"zero";for(var o=1;o<t.length;o++){if(t[o].cells[0].style.backgroundColor=="red")continue;if(parseInt(t[o].cells[3].textContent)<parseInt(document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[3].value))continue;var u="";for(var a=1;a<n.length;a++){s=0;if(n[a].cells[2].innerHTML!=""){var f=new Date(n[a].cells[2].textContent);if(i>f){n[a].cells[2].innerHTML="";u="all"}else{if(n[a].cells[2].style.backgroundColor=="yellow")u="gyalog";else continue}}else u="all";var l=isgyalog(a);if(l==0)continue;if(l==1&&u=="gyalog")continue;if(l==1&&u=="all")s=10;if(l==2&&u=="gyalog")s=18;if(l==2&&u=="all")s=10;if(l==3){s=18;u="gyalog"}if(s==0){debug("Farmoló","Anomália lépett fel farmkereséskor.");continue}s=s*(1/SPEED)*(1/UNIT_S);s=s*Math.abs(Math.sqrt(Math.pow(parseInt(t[o].cells[0].textContent.split("|")[0])-parseInt(n[a].cells[0].textContent.split("|")[0]),2)+Math.pow(parseInt(t[o].cells[0].textContent.split("|")[1])-parseInt(n[a].cells[0].textContent.split("|")[1]),2)));if(r.length==0||r[0]>s){r=[s,u,n[a].cells[0].textContent,t[o].cells[0].textContent]}}}if(r.length==0){return""}var c=parseInt(document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[1].value)*60+parseInt(document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[2].value);if(r[0]>c)return"";return r}catch(h){debug("szem4_farmolo_1kereso()",h)}return""}function szem4_farmolo_2illeszto(e){try{try{TamadUpdt(FARM_REF)}catch(t){}var n=FARM_REF.document.forms["units"];n.x.value=e[3].split("|")[0];n.y.value=e[3].split("|")[1];var r=document.getElementById("farm_honnan").rows;for(var i=1;i<r.length;i++){if(r[i].cells[0].textContent==e[2]){r=r[i].cells[1].getElementsByTagName("input");break}}var s=document.getElementById("farm_hova").rows;for(var i=1;i<s.length;i++){if(s[i].cells[0].textContent==e[3]){s=s[i];break}}var o=document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input");var u=new Array;for(var i=0;i<UNITS.length;i++){try{if(r[i].checked)u[i]=parseInt(FARM_REF.document.getElementById("unit_input_"+UNITS[i]).parentNode.children[2].textContent.match(/[0-9]+/g)[0]);else{if(i==4&&o[5].checked)u[i]=parseInt(FARM_REF.document.getElementById("unit_input_"+UNITS[i]).parentNode.children[2].textContent.match(/[0-9]+/g)[0]);else u[i]=0}}catch(t){u[i]=0}}var a=10;if(r[4].checked||o[5].checked){if(u[4]>parseInt(o[4].value))n.spy.value=o[4].value}var f=parseInt(s.cells[3].textContent,10);var l="";var c=0;var h=0;if(e[1]=="all"){for(var i=5;i<UNITS.length;i++){try{if(f>TEHER[i]){var p=Math.ceil(f/TEHER[i]);var d=u[i];if(p>d)var v=d;else var v=p;f-=v*TEHER[i];c+=v*TEHER[i];l+=UNITS[i]+":"+v+"; ";FARM_REF.document.getElementById("unit_input_"+UNITS[i]).value=v;h+=TANYA[i]*v;if(a<E_SEB[i])a=E_SEB[i]}}catch(t){}}}else{for(var i=0;i<4;i++){try{if(f>TEHER[i]){var p=Math.ceil(f/TEHER[i]);var d=u[i];if(p>d)var v=d;else var v=p;f-=v*TEHER[i];c+=v*TEHER[i];l+=UNITS[i]+":"+v+"; ";FARM_REF.document.getElementById("unit_input_"+UNITS[i]).value=v;h+=TANYA[i]*v;if(a<E_SEB[i])a=E_SEB[i]}}catch(t){}}}if(f>parseInt(o[3].value,10))n.spy.value=0;var m=false;if(o[5].checked&&u[4]<parseInt(o[4].value)){ezt=e[1]+"|semmi"}else{var g=(parseInt(FARM_REF.document.getElementById("wood").textContent)+parseInt(FARM_REF.document.getElementById("stone").textContent)+parseInt(FARM_REF.document.getElementById("iron").textContent))/(parseInt(FARM_REF.document.getElementById("storage").textContent)*3);if(Math.round(g*100)>parseInt(o[10].value)){ezt=e[1]+"|semmi"}else{if(h>parseInt(o[7].value)){if(o[6].checked){if(s.cells[1].style.backgroundColor=="rgb(213, 188, 244)")n.spy.value=0;if(s.cells[1].innerHTML!="")n.spy.value=0}if(parseInt(n.spy.value,10)>0&&s.cells[1].innerHTML=="")m=true;if(c-100>parseInt(s.cells[3].textContent,10))debug("Farmolo()","<b>ERROR: TOO MANY UNITS</b>");n.attack.click();ezt=e[1]}else ezt=e[1]+"|semmi"}}return[f,ezt,e[2],e[3],a,m,c]}catch(t){debug("Illeszto()",t);FARM_LEPES=0;return""}}function szem4_farmolo_3egyeztet(e){try{var t=document.getElementById("farm_honnan").rows;for(var n=1;n<t.length;n++){if(t[n].cells[0].textContent==e[2]){t=t[n];break}}var r=document.getElementById("farm_hova").rows;for(var n=1;n<r.length;n++){if(r[n].cells[0].textContent==e[3]){r=r[n];break}}try{if(FARM_REF.document.getElementById("content_value").getElementsByTagName("div")[0].getAttribute("class")=="error_box"){naplo("Farmoló","Hiba "+e[3]+" farmolásánál: "+FARM_REF.document.getElementById("content_value").getElementsByTagName("div")[0].textContent+". Tovább nem támadom");r.cells[0].style.backgroundColor="red";FARM_LEPES=0;return""}}catch(i){}try{if(FARM_REF.document.getElementById("content_value").getElementsByTagName("table")[0].rows[2].cells[1].getElementsByTagName("a")[0].href.indexOf("info_player")>-1){if(!r.cells[4].getElementsByTagName("input")[0].checked){naplo("Farmoló","Játékos "+maplink(e[3])+" helyen: "+FARM_REF.document.getElementById("content_value").getElementsByTagName("table")[0].rows[2].cells[1].innerHTML.replace("href",'target="_BLANK" href')+". Tovább nem támadom");r.cells[0].style.backgroundColor="red";FARM_LEPES=0;return""}}}catch(i){}try{var s=FARM_REF.document.getElementById("content_value").getElementsByTagName("table")[0].rows;s=parseInt(s[s.length-1].cells[0].textContent.replace(/[^0-9]+/g,""));if(e[6]!=s)debug("farm3","<b>NEM JÓ</b>")}catch(i){debug("farm3","Teherbírás megállapítás hiba: "+i)}hatszam=parseInt(document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[3].value,10);if(e[1].indexOf("semmi")==-1||e[6]>hatszam*2){var o=document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input");if(e[5])r.cells[1].style.backgroundColor="rgb(213, 188, 244)";FARM_REF.document.forms[0].submit.click();r.cells[0].setAttribute("data-age",0);if(e[0]>parseInt(o[3].value)){var u=getServerTime(FARM_REF);var a=Math.abs(Math.sqrt(Math.pow(parseInt(e[2].split("|")[0])-parseInt(e[3].split("|")[0]),2)+Math.pow(parseInt(e[2].split("|")[1])-parseInt(e[3].split("|")[1]),2)));a=a*(1/SPEED)*(1/UNIT_S)*e[4];a=Math.round(a);u.setMinutes(u.getMinutes()+a);r.cells[5].innerHTML=u}}r.cells[3].innerHTML=e[0];if(e[1]=="all")var f=true;else var f=false;var l=false;if(e[0]>25)l=true;return[l,f,e[2],e[3]]}catch(i){debug("szem4_farmolo_3egyeztet()",i);FARM_LEPES=0}}function szem4_farmolo_4visszaell(e){try{try{var t=false;var n=FARM_REF.document.getElementById("content_value").getElementsByTagName("table");var r=new RegExp(/[0-9]+(\|)[0-9]+/);try{if(r.test(n[n.length-2].rows[1].cells[0].textContent)&&n[n.length-2].rows[0].cells.length>2){t=true;n=n[n.length-2].rows}}catch(i){}try{if(!t)if(r.test(n[n.length-1].rows[1].cells[0].textContent)&&n[n.length-1].rows[0].cells.length>2){t=true;n=n[n.length-1].rows}}catch(i){}}catch(i){debug("4_seregmozgas",i);t=false}var s=document.getElementById("farm_honnan").rows;for(var o=1;o<s.length;o++){if(s[o].cells[0].textContent==e[2]){s=s[o];break}}if(typeof e[1]=="boolean")var u=e[1];else{if(e[1].indexOf("all")>-1)var u=true;else var u=false}if(u){var a=false;for(var o=0;o<3;o++){if(s.cells[1].getElementsByTagName("input")[o].checked){if(FARM_REF.document.getElementById("unit_input_"+UNITS[o])){if(parseInt(FARM_REF.document.getElementById("unit_input_"+UNITS[o]).parentNode.children[2].textContent.match(/[0-9]+/g)[0])>5){a=true;break}}}}if(!a)u=false}var f=s.cells[1].getElementsByTagName("input");var l=22;for(var o=0;o<f.length;o++){if(o==4)continue;if(f[o].checked&&E_SEB[o]>l)l=E_SEB}var c=true;var h=60;if(t){var p;var d;var v;var m=false;for(var o=1;o<n.length;o++){if(n[o].cells[0].getElementsByTagName("img")[0].src.indexOf("support")>-1)continue;if(n[o].cells[0].getElementsByTagName("img")[0].src.indexOf("attack")==-1){m=true}p=n[o].cells[0].textContent.match(/[0-9]+(\|)[0-9]+/g);p=p[p.length-1];if(!m){d=Math.abs(Math.sqrt(Math.pow(parseInt(p.split("|")[0])-parseInt(e[2].split("|")[0]),2)+Math.pow(parseInt(p.split("|")[1])-parseInt(e[2].split("|")[1]),2)));d=d*l*(1/UNIT_S)*(1/SPEED)}else d=0;v=n[o].cells[2].textContent.split(":");v=parseInt(v[0]*60)+parseInt(v[1]);d+=v;if(d<h)h=d;if(m)break}}if(t&&!u)c=false;if(!t&&!u){naplo("Farmolo",'<a target="_BLANK" href=\''+VILL1ST.replace(/village=[0-9]+/,"village="+koordTOid(e[2])).replace("screen=overview","screen=place")+"'>"+e[2]+"</a> faluban nincs egység, vagy túltelített a raktár!.");s.cells[0].style.backgroundColor="red";c=false}else s.cells[0].style.backgroundColor="#f4e4bc";var g=new Date;if(c)s.cells[2].style.backgroundColor="yellow";else s.cells[2].style.backgroundColor="#f4e4bc";g.setMinutes(g.getMinutes()+1+h);s.cells[2].innerHTML=g}catch(i){debug("szem4_farmolo_4visszaell()",i);return}return}function szem4_farmolo_motor(){try{var e=500;e=parseInt(document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[9].value,10);if(BOT||FARM_PAUSE){e=5e3}else{if(FARM_HIBA>10){FARM_HIBA=0;FARM_GHIBA++;if(FARM_GHIBA>3){if(FARM_GHIBA>5){naplo("Globál","Nincs internet? Folyamatos hiba farmolónál");e=6e4;playSound("bot2")}FARM_REF.close()}FARM_LEPES=0}switch(FARM_LEPES){case 0:PM1=szem4_farmolo_1kereso();if(PM1=="zero"){e=1e4;break}if(PM1==""){e=parseInt(document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[8].value,10)*6e4;break}FARM_REF=window.open(VILL1ST.replace(/village=[0-9]+/,"village="+koordTOid(PM1[2])).replace("screen=overview","screen=place"),AZON+"_Farmolo");FARM_LEPES=1;break;case 1:if(isPageLoaded(FARM_REF,koordTOid(PM1[2]),"screen=place")){FARM_HIBA=0;FARM_GHIBA=0;PM1=szem4_farmolo_2illeszto(PM1);if(typeof PM1=="object"&&PM1.length>0){if(PM1[1].indexOf("semmi")>0)FARM_LEPES=3;else FARM_LEPES=2}else FARM_LEPES=0}else{FARM_HIBA++}break;case 2:if(isPageLoaded(FARM_REF,koordTOid(PM1[2]),"try=confirm")){FARM_HIBA=0;FARM_GHIBA=0;PM1=szem4_farmolo_3egyeztet(PM1);if(typeof PM1=="object"&&PM1.length>0&&PM1[0]==true){FARM_LEPES=3}else FARM_LEPES=0}else{FARM_HIBA++}break;case 3:if(isPageLoaded(FARM_REF,koordTOid(PM1[2]),"not try=confirm")){FARM_HIBA=0;FARM_GHIBA=0;szem4_farmolo_4visszaell(PM1);FARM_LEPES=0}else{FARM_HIBA++}break;default:FARM_LEPES=0}}}catch(t){debug("szem4_farmolo_motor()",t+" Lépés:"+FARM_LEPES)}var n=100/(Math.random()*40+80);e=Math.round(e*n);setTimeout("szem4_farmolo_motor()",e);return}function VIJE_FarmElem(e){try{var t=document.getElementById("farm_hova").rows;var n=false;for(var r=1;r<t.length;r++){if(t[r].cells[0].textContent==e){n=true;t=t[r];break}}if(!n)return[false,false,0];var i=true;if(t.cells[1].textContent=="")i=false;if(t.cells[5].textContent!="")var s=new Date(t.cells[5].textContent);else var s=getServerTime(VIJE_REF1);s.setMinutes(s.getMinutes()-1);return[n,i,s]}catch(o){debug("VIJE1_farmelem","Hiba: "+o)}}function VIJE_elemzett(e){try{var t=document.getElementById("VIJE_elemzett").textContent;if(t=="")return false;t=t.split(",");for(var n=0;n<t.length;n++){if(t[n]==e)return true}if(t.length>130)document.getElementById("VIJE_elemzett").innerHTML=t.slice(t.length-100,t.length);return false}catch(r){debug("VIJE1_farmelem","Hiba: "+r)}}function szem4_VIJE_1kivalaszt(){try{try{TamadUpdt(VIJE_REF1)}catch(e){}VT=VIJE_REF1.document.getElementById("report_list").rows;if(VT.length<3)return[0,0,"",false];var t=false;for(var n=VT.length-2;n>0;n--){try{var r=VT[n].cells[1].textContent.match(/[0-9]+(\|)[0-9]+/g);r=r[r.length-1]}catch(e){continue}var i=VT[n].cells[1].getElementsByTagName("span")[0].getAttribute("data-id").replace("label_","");if(VIJE_elemzett(i))continue;var s=VT[n].cells[1].childNodes;for(var o=0;o<s.length;o++){if(s[o].nodeName=="IMG"){s=s[o].src.split(".png")[0].split("/");s=s[s.length-1];break}}var u=VIJE_FarmElem(r);if(u[0]==false)continue;var a=getServerTime(VIJE_REF1);var f=getServerTime(VIJE_REF1);if(u[2]>a){continue}var l=VT[n].cells[2].textContent.match(/[0-9]+:[0-9]+/g)[0];var c=VT[n].cells[2].textContent.replace(l,"").match(/[^0-9][0-3][0-9][^0-9]/g)[0].match(/[0-3][0-9]/g)[0];a.setMinutes(l.split(":")[1]);a.setHours(l.split(":")[0]);a.setDate(c);if(f-a>108e5)var h=true;else var h=false;if(u[1]==false){t=true;break}if(h)continue;if(u[1]==true){t=true;break}}if(!t){for(var n=VT.length-2;n>0;n--){if(VT[n].cells[0].getElementsByTagName("input")[0].checked)return[0,0,"",true]}return[0,0,"",false]}if(s=="green")VT[n].cells[0].getElementsByTagName("input")[0].checked=true;return[i,r,s,false,h]}catch(e){debug("VIJE1","Hiba: "+e);return[0,0,"",false]}}function VIJE_adatbeir(e,t,n,r,i){try{var s=document.getElementById("farm_hova").rows;for(var o=1;o<s.length;o++){if(s[o].cells[0].textContent==e){s=s[o];break}}s.cells[0].setAttribute("data-age",0);if(n!==""){s.cells[1].innerHTML=n;s.cells[1].backgroundColor="#f4e4bc";if(r=="")r=0}if(r!==""){if(parseInt(s.cells[2].innerHTML)>parseInt(r))s.cells[2].backgroundColor=="#f4e4bc";s.cells[2].innerHTML=r}if(t!==""){s.cells[3].innerHTML=t;if(t>parseInt(document.getElementById("farm_opts").rows[2].cells[1].getElementsByTagName("input")[3].value,10))debug("VIJE_adatbeír","Sok nyers van itt, lehet hiba? "+e+" falunál")}if(i==="green")s.cells[0].style.backgroundColor="#f4e4bc";else if(i==="yellow")s.cells[0].style.backgroundColor="yellow";else if(i==="blue"){}else{s.cells[0].style.backgroundColor="red";naplo("Jelentés Elemző",e+" farm veszélyesnek ítélve. Jelentésének színe "+i+".")}if(s.cells[5].innerHTML!="")s.cells[5].innerHTML="";return}catch(u){debug("VIJE_adatbeir","Hiba: "+u)}}function szem4_VIJE_2elemzes(e){try{var t=0;if(VIJE_REF2.document.getElementById("attack_spy_resources")){var n=VIJE_REF2.document.getElementById("attack_spy_resources").rows[0].cells[1];if(e[4]){var t="";debug("VIJE2","Nem kell elemezni (régi)")}else{try{var r=n.textContent.replace(/\./g,"").match(/[0-9]+/g);if(r.length!=3)throw"LENGTH_NOT_3";if(n.innerHTML.indexOf("iron")===-1)throw"IRON_NOT_FOUND";var t=0;for(var i=0;i<r.length;i++)t+=parseInt(r[i],10)}catch(s){var t=0;debug("VIJE","<a href='"+VIJE_REF2.document.location+"'>"+e[0]+"</a> ID-jű jelentés nem szokványos, talált nyers 0-ra állítva. Hiba: "+s)}}if(VIJE_REF2.document.getElementById("attack_spy_buildings_left")){var o=document.getElementById("vije").getElementsByTagName("input");var u=new Array(o[0].value.toUpperCase(),o[1].value.toUpperCase(),o[2].value.toUpperCase(),o[3].value.toUpperCase());var a=new Array(0,0,0);var f=0;var o=VIJE_REF2.document.getElementById("attack_spy_buildings_left").rows;for(var i=1;i<o.length;i++){for(var l=0;l<3;l++){if(o[i].cells[0].textContent.toUpperCase().indexOf(u[l])>-1)a[l]=o[i].cells[1].textContent}if(o[i].cells[0].textContent.toUpperCase().indexOf(u[3])>-1)f=o[i].cells[1].textContent}var o=VIJE_REF2.document.getElementById("attack_spy_buildings_right").rows;for(var i=1;i<o.length;i++){for(var l=0;l<3;l++){if(o[i].cells[0].textContent.toUpperCase().indexOf(u[l])>-1)a[l]=o[i].cells[1].textContent}if(o[i].cells[0].textContent.toUpperCase().indexOf(u[3])>-1)f=o[i].cells[1].textContent}}else{var a="";var f=""}VIJE_adatbeir(e[1],t,a,f,e[2])}else{VIJE_adatbeir(e[1],0,"","",e[2])}document.getElementById("VIJE_elemzett").innerHTML+=e[0]+",";if(document.getElementById("VIJE_elemzett").innerHTML.split(",").length>200){document.getElementById("VIJE_elemzett").innerHTML=document.getElementById("VIJE_elemzett").innerHTML.split(",").splice(100,100)+","}return true}catch(s){debug("VIJE2","Elemezhetetlen jelentés: "+e[0]+":"+e[1]+". Hiba: "+s);VIJE_adatbeir(e[1],t,"","",e[2]);return false}}function szem4_VIJE_3torol(){try{if(document.getElementById("vije").getElementsByTagName("input")[4].checked){try{VIJE_REF1.document.forms[0].del.click()}catch(e){VIJE_REF1.document.getElementsByName("del")[0].click()}}}catch(e){debug("VIJE3","Hiba: "+e);return}}function szem4_VIJE_motor(){try{var e=1500;if(BOT||VIJE_PAUSE){e=5e3}else{if(VIJE_HIBA>10){VIJE_HIBA=0;VIJE_GHIBA++;if(VIJE_GHIBA>3){if(VIJE_GHIBA>5){naplo("Globál","Nincs internet? Folyamatos hiba a jelentés elemzőnél");e=6e4;playSound("bot2")}VIJE_REF1.close()}VIJE_LEPES=0}if(VIJE2_HIBA>10){VIJE2_HIBA=0;VIJE2_GHIBA++;if(VIJE2_GHIBA>3){if(VIJE2_GHIBA>5)naplo("Globál","Nincs internet? Folyamatos hiba a jelentés elemzőnél");VIJE_REF2.close()}VIJE_LEPES=0}if(VIJE_LEPES!=0&&VIJE_REF1.closed)VIJE_LEPES=0;switch(VIJE_LEPES){case 0:if(document.getElementById("farm_hova").rows.length>1){var t="";if(VIJE_REF1.game_data.player.premium)t="group_id=-1&";VIJE_REF1=window.open(VILL1ST.replace("screen=overview","mode=attack&"+t+"screen=report"),AZON+"_SZEM4VIJE_1");VIJE_LEPES=1}else e=1e4;break;case 1:if(isPageLoaded(VIJE_REF1,-1,"screen=report")){VIJE_HIBA=0;VIJE_GHIBA=0;PM2=szem4_VIJE_1kivalaszt();if(PM2[0]===0){if(PM2[3])VIJE_LEPES=3;else{VIJE_LEPES=0;e=12e4}}else{VIJE_REF2=window.open(VILL1ST.replace("screen=overview","mode=attack&view="+PM2[0]+"&screen=report"),AZON+"_SZEM4VIJE_2");VIJE_LEPES=2}}else{VIJE_HIBA++}break;case 2:if(isPageLoaded(VIJE_REF2,-1,PM2[0])){VIJE2_HIBA=0;VIJE2_GHIBA=0;szem4_VIJE_2elemzes(PM2);if(PM2[3])VIJE_LEPES=3;else VIJE_LEPES=1}else{VIJE2_HIBA++}break;case 3:szem4_VIJE_3torol();VIJE_LEPES=0;break;default:VIJE_LEPES=0}}}catch(n){debug("szem4_VIJE_motor()","ERROR: "+n+" Lépés:"+VIJE_LEPES)}var r=100/(Math.random()*40+80);e=Math.round(e*r);setTimeout("szem4_VIJE_motor()",e);return}function TamadUpdt(e){try{var t=document.getElementById("idtamad_Bejovok");var n=new Date;var r=parseInt(e.game_data.player.incomings,10);var i=0;if(t.rows.length>1)i=parseInt(t.rows[1].cells[1].innerHTML,10);if(r==i)return;var s=t.insertRow(1);var o=s.insertCell(0);var u=s.insertCell(1);o.innerHTML=n;u.innerHTML=r;if(r>i)playSound("bejovo");return}catch(a){debug("ID beir","Hiba: "+a)}}function stop(){var e=setTimeout("",100);for(var t=0;t<e;t++)clearTimeout(t)}stop();document.getElementsByTagName("html")[0].setAttribute("class","");if(typeof AZON!="undefined")exit();try{var SZEM4_LOCAL_STORAGE="";var AZON="S0";if(window.name.indexOf(AZON)>-1)AZON="S1";var BASE_URL=document.location.href.split("game.php")[0];var CONFIG=loadXMLDoc(BASE_URL+"interface.php?func=get_config");var SPEED=parseFloat(CONFIG.getElementsByTagName("speed")[0].textContent);var UNIT_S=parseFloat(CONFIG.getElementsByTagName("unit_speed")[0].textContent);var VILL1ST="";var ALTBOT=true;var VERZIO="4.50927Final";$.getScript("http://cncdani2.freeiz.com/SZEM4/SZEM4_VER.js");AZON=game_data.player.id+"_"+game_data.world+AZON}catch(e){alert(e)}var SUGOORA;var BOTORA,ALTBOT2=false,BOT_VOL=0;var KTID=new Array,TERMELES=new Array(5,30,35,41,47,55,64,74,86,100,117,136,158,184,214,249,289,337,391,455,530,616,717,833,969,1127,1311,1525,1774,2063,2400),UNITS=new Array("spear","sword","axe","archer","spy","light","marcher","heavy"),TEHER=new Array(25,15,10,10,0,80,50,50),TANYA=new Array(1,1,1,1,2,4,5,6),E_SEB=new Array(18,22,18,18,9,10,10,11),BOT=false;init();ujkieg_hang("Alaphangok","naplobejegyzes;bot2");ujkieg("farm","Farmoló",'<tr><td>  <table class="vis" id="farm_opts" style="width:100%; margin-bottom: 50px;"><tr><th>Farmoló falu hozzáadása</th><th>Farmolandó falu hozzáadása</th></tr><tr><td style="width:48%;" onmouseover="sugo(\'Adj meg koordinátákat, melyek a te faluid és farmolni szeretnél velük. A koordináták elválasztása bármivel történhet.\')">Koordináták: <input type="text" size="45" placeholder="111|111, 222|222, ..."> <input type="button" value="Hozzáad" onclick="add_farmolo()"></td><td style="width:52%;" onmouseover="sugo(\'Adj meg koordinátákat, amelyek farmok, és farmolni szeretnéd. A koordináták elválasztása bármivel történhet.\')">Koordináták:  <input type="text" size="45" placeholder="111|111, 222|222, ..."> <input type="button" value="Hozzáad" onclick="add_farmolando()"></td></tr><tr><td onmouseover="sugo(\'A felvivendő falukból ezeket az egységeket használhatja SZEM IV farmolás céljából. Később módosítható.\')" style="vertical-align:middle;">Mivel? '+rovidit("egysegek")+'</td><td>Termelés/óra: <input onkeypress="validate(event)" type="text" size="5" value="3600" onmouseover="sugo(\'Ha nincs felderített bányaszint, úgy veszi ennyi nyers termelődik\')"> Max táv: <input type="text" size="2" value="4" onkeypress="validate(event)" onmouseover="sugo(\'A max távolság, amin túl már nem küldök támadásokat\')">óra <input onkeypress="validate(event)" type="text" size="2" value="0" onmouseover="sugo(\'A max távolság, amin túl már nem küldök támadásokat\')">perc. Határszám: <input type="text" onkeypress="validate(event)" onmouseover="sugo(\'Az új farmok ennyi nyersanyaggal lesznek felvíve. Másrész, ez alatti nyersanyagért még nem indulok el.\')" value="3600" size="5"><br>Kém/falu: <input onkeypress="validate(event)" type="text" value="1" size="2" onmouseover="sugo(\'Minden támadással ennyi kém fog menni\')"> Kényszerített?<input type="checkbox" onmouseover="sugo(\'Kémek nélkül nem indít támadást. Kémeket annak ellenére is fog vinni, ha nincs bepipálva a kém egység.\')">Kezdő feld.?<input type="checkbox" onmouseover="sugo(\'Minden falura maximum egyszer fog menni kém.\')">&nbsp;&nbsp;Min sereg/falu: <input onkeypress="validate(event)" type="text" value="100" size="4" onmouseover="sugo(\'Ennél kevesebb fő támadásonként nem indul. A szám tanyahely szerinti foglalásban értendő.\')"><br>Sebesség: <input onkeypress="validate(event)" type="text" size="2" value="10" onmouseover="sugo(\'Ha a farmoló nem talál több feladatot magának megáll, ennyi időre. Érték lehet: 1-300. Javasolt érték: 10-120 perc\')">perc/<input onkeypress="validate(event)" type="text" size="3" value="500" onmouseover="sugo(\'Egyes utasítások/lapbetöltődések ennyi időközönként hajtódnak végre. Érték lehet: 200-6000. Javasolt: 500ms, lassabb gépek esetén 1000-2000.\')">ms. Ha a raktár &gt;<input type="text" size="2" onmouseover="sugo(\'Figyeli a raktár telítettségét, és ha a megadott % fölé emelkedik, nem indít támadást onnan. Telítettség össznyersanyag alapján számolva. Min: 20. Ne nézze: 100-nál több érték megadása esetén.\')" value="90">%, nem foszt.</td></tr></table>  <table class="vis" id="farm_honnan" style="vertical-align:top; display: inline-block; width:550px"><tr><th width="55px" onmouseover="sugo(\'Ezen falukból farmolsz. Dupla klikk az érintett sor koordinátájára=sor törlése.<br>Rendezhető\')" style="cursor: pointer;" onclick=\'rendez("szoveg",false,this,"farm_honnan",0)\'>Honnan</th><th onmouseover="sugo(\'Ezen egységeket használ fel SZEM a farmoláshoz. Bármikor módosítható.\')">Mivel?</th><th onmouseover="sugo(\'Ekkor ér vissza sereg a számításaim szerint. Dupla klikk=törlés=már megérkezett/nézd újra.<br>Rendezhető.<br><br>Pipa: egy cellán végrehajtott (duplaklikkes) művelet minden látható falura érvényes lesz.\')" onclick=\'rendez("datum",false,this,"farm_honnan",2)\' style="cursor: pointer; vertical-align:middle;">Return <span style="margin-left: 45px; margin-right: 0px;"><img src="'+pic("search.png")+'" alt="?" title="Szűrés falukra..." style="width:15px;height:15px;" onclick="szem4_farmolo_csoport(\'honnan\')"><input type="checkbox" id="farm_multi_honnan" onmouseover="sugo(\'Ha bepipálod, akkor egy cellán végzett dupla klikkes művelet minden sorra érvényes lesz az adott oszlopba (tehát minden falura), ami jelenleg látszik. Légy óvatos!\')"></span></th></tr></table> <table class="vis" id="farm_hova" style="vertical-align:top; display: inline-block;"><tr><th onmouseover="sugo(\'Ezen falukat farmolod. A háttérszín jelöli a jelentés színét: alapértelmezett=zöld jelik/nincs felderítve. Sárga=veszteség volt a falun. Piros: a támadás besült, nem megy rá több támadás.<br>Dupla klikk a koordira: a háttérszín alapértelmezettre állítása.<br>Rendezhető\')" style="cursor: pointer;" onclick=\'rendez("szoveg",false,this,"farm_hova",0)\'>Hova</th><th onmouseover="sugo(\'Felderített bányaszintek, ha van. Kék háttér: megy rá kémtámadás.<br>Dupla klikk=az érintett sor törlése\')">Bányák</th><th onmouseover="sugo(\'Fal szintje. Dupla klikk=háttér csere (csak megjelölésként). <br>Rendezhető.\')" onclick=\'rendez("szam",false,this,"farm_hova",2)\' style="cursor: pointer;">Fal</th><th onmouseover="sugo(\'Számítások szerint ennyi nyers van az érintett faluba. Dupla klikk=érték módosítása.<br>Rendezhető.\')" onclick=\'rendez("szam",false,this,"farm_hova",3)\' style="cursor: pointer;">Nyers</th><th onmouseover="sugo(\'Játékos e? Ha játékost szeretnél támadni, pipáld be a falut mint játékos uralta, így támadni fogja. Ellenben piros hátteret kap a falu.\')">J?</th><th onmouseover="sugo(\'A falura ekkor ér be az utolsó nagyerejű támadás. Információ a jelentés elemzőnek. Dupla klikk=idő törlése.<br>Rendezhető.<br><br>Pipa: egy cellán végrehajtott (duplaklikkes) művelet minden látható falura érvényes lesz.\')" onclick=\'rendez("datum",false,this,"farm_hova",5)\' style="cursor: pointer; vertical-align:middle;">Ut.T<span style="margin-left: 65px; margin-right: 0px;"><img src="'+pic("search.png")+'" alt="?" title="Szűrés falukra..." style="width:15px;height:15px;" onclick="szem4_farmolo_csoport(\'hova\')"><input type="checkbox" id="farm_multi_hova"></span></th></tr></table></p> </td></tr>');szem4_farmolo_updater();var FARM_LEPES=0,FARM_REF,FARM_HIBA=0,FARM_GHIBA=0,PM1,FARM_PAUSE=false;szem4_farmolo_motor();ujkieg("vije","Jelentés Elemző",'<tr><td>A VIJE a Farmoló táblázatába dolgozik, itt csupán működési beállításokat módosíthatsz.<br><br><br>"Fatelep" a szerver jelenlegi nyelvén: <input type="text" size="15"  value="Fatelep"><br>"Agyagbánya" a szerver jelenlegi nyelvén: <input type="text" size="15"  value="Agyagbánya"><br>"Vasbánya" a szerver jelenlegi nyelvén: <input type="text" size="15" value="Vasbánya"><br>"Fal" a szerver jelenlegi nyelvén: <input type="text" size="15" value="Fal"><br><input type="checkbox"> Zöld farmjelentések törlése<br><br><br><i>Elemzett jelentések:</i><div id="VIJE_elemzett" style="font-size:30%;width:980px;word-wrap: break-word;"></div></td></tr>');var VIJE_PAUSE=false;var VIJE_LEPES=0;var VIJE_REF1;var VIJE_REF2;var VIJE_HIBA=0;var VIJE_GHIBA=0;var VIJE2_HIBA=0;var VIJE2_GHIBA=0;var PM2;szem4_VIJE_motor();ujkieg_hang("Bejövő támadások","bejovo");ujkieg("idtamad","Bejövő támadások",'<tr><td align="center" ><table class="vis" id="idtamad_Bejovok" style="vertical-align:top; display: inline-block;"><tr><th>Időpont</th><th>Támadások száma</th></tr></table> </td></tr>');$(document).ready(function(){nyit("naplo");naplo("Indulás","SZEM4 Elindult. Hangteszt...");soundVolume(.2);playSound("bot2");setTimeout(function(){naplo("Indulás","Hangteszt vége. Ha nem hallotta a sípszót, vélhetőleg nem elérhető a cnc weboldal - használja az alternatív botriadót!");soundVolume(1)},3e3);$.getScript("http://cncdani2.freeiz.com/SZEM4/SZEM4_VER.js");setTimeout("vercheck()",5e3);$(function(){$("#alert2").draggable({handle:$("#alert2head")});$("#sugo").mouseover(function(){sugo("Ez itt a súgó")});$("#fejresz").mouseover(function(){sugo("")})});$("#farm_opts input").on("keydown keypress",function(){setTimeout("shorttest()",20)})});void 0